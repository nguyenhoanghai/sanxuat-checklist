function ShowAjaxProcessFull(){$("#ajax-process-full").dialog({resizable:!1,height:24,width:228,modal:!0,closeText:"",bgiframe:!0,closeOnEscape:!1,dialogClass:"alert",draggable:!1});$($("#ui-dialog-title-ajax-process-full").parent()).remove()}function CloseAjaxProcessFull(){$("#ajax-process-full").dialog("close")}function datepicker(e,t){var a="dd/mm/yy";t&&(a=t),$("#"+e).datepicker({dateFormat:a})}function datetimePicker(e){$("#"+e).datetimepicker({showSecond:!0,timeFormat:"hh:mm:ss",dateFormat:"dd/mm/yy"})}function parseDate(e,t){if(void 0==e||null==e||0==e.length)return null;var a=/(\d{2})\/(\d{2})\/(\d{4}) (\d{2}):(\d{2}):(\d{2})/g,o=a.exec(e);if(t&&"dd/mm/yy"==t)a=/(\d{2})\/(\d{2})\/(\d{4})/g,o=a.exec(e),n=new Date(+o[3],+o[2]-1,+o[1],0,0,0);else if(t&&"dd/mm/yy hh:ii"==t)a=/(\d{2})\/(\d{2})\/(\d{4}) (\d{2}):(\d{2})/g,o=a.exec(e),n=new Date(+o[3],+o[2]-1,+o[1],+o[4],+o[5],0);else var n=new Date(+o[3],+o[2]-1,+o[1],+o[4],+o[5],+o[6]);return n}function setDataToFormWithTmpl(e,t,a){$("#"+a).empty(),$("#"+t).tmpl(e).appendTo("#"+a)}function setDataToFormWithTmplNonEmpty(e,t,a){$("#"+t).tmpl(e).appendTo("#"+a)}function setDataToErrorFormWithTmpl(e,t,a){var o="template_error_message";null==a||0==a||"false"==a?($($($("#"+t).parent()).parent()).show(),$("#"+t).empty(),$("#"+o).tmpl(e).appendTo("#"+t)):($(t).empty(),$("#"+o).tmpl(e).appendTo(t),$($($(t).parent()).parent()).show())}function convertJsonDateTimeToJs(e){return new Date(+e.replace(/\/Date\((-?\d+)\)\//gi,"$1"))}function FormatDateToString(e,t){return dateFormat(e,t)}function FormatDateJsonToString(e,t){if(null==e)return"";var a=convertJsonDateTimeToJs(e);return t?dateFormat(a,t):dateFormat(a,"dd/mm/yyyy HH:MM:ss")}function FormatDateToStringBySelector(e,t){var a=$("#"+e).datetimepicker("getDate");if(null!=t){var o=new Date;if(a.getDate()==o.getDate()){var n=o.getDate()-t;a=a.setDate(n)}}return $.format.date(a,"MM/dd/yy HH:mm:ss")}function FormatDateToStringObj(e,t,a){return $.each(t,function(t,o){var n=$("#"+a[t]).val();e[o]=parseDate(n,"dd/mm/yy hh:ii:ss")}),e}function _showModelErrors(e,t,a,o){if(GlobalCommon.ClearErrorStatus(t),null==e.ErrorMessages||e.ErrorMessages.length<=0){if(null!=e.Message){var n="<strong>"+e.Message+"</strong><br/>";$("#"+t+" .alert #alert_content").html("").append(n).parent().show()}}else if($.each(e.ErrorMessages,function(e,o){if(1==a){var n=("<ul><li>"+o.Message+"</li></ul>",$("#"+t+' label[bindmessage="'+o.MemberName+'"]').html("").append(o.Message).attr("title",o.Message)),r=n.parent().parent();1==r.hasClass("control-group")&&r.addClass("error")}else{var n=("<ul><li>"+o.Message+"</li></ul>",$("#"+t+' label[bindmessage="'+o.MemberName+'"]').html("").append("(*)").attr("title",o.Message)),r=n.parent().parent();1==r.hasClass("control-group")&&r.addClass("error")}}),1==o){var r="<ul>";if($.each(e.ErrorMessages,function(e,t){r+="<li>"+t.Message+"</li>"}),r+="</ul>",null!=e.Message&&void 0!=e.Message&&NaN!=e.Message)var n="<strong>"+e.Message+"</strong><br/>";$("#"+t+" .alert #alert_content").html("").append(n).append(r).parent().show(),$("#"+t).height("auto"),$("#"+t).find('[data-dismiss="alert"]').unbind("click"),$("#"+t).find('[data-dismiss="alert"]').click(function(){$("#"+t).find("div.alert").hide()})}}function GetDataToDLL(e,t,a,o,n,r){$.ajax({url:e,type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){"OK"==e.Result&&($.each(e.Data,function(e,r){var l="<option value='"+r[""+o]+"'>"+r[""+a]+"</option>";$.each(t,function(e,t){$("#"+t).append(l),n&&r.IsDefault&&($("#"+t).val(r[""+o]),$("#"+t).attr("defaultvalue",r[""+o]))})}),null!=r&&r())},error:function(){},beforeSend:function(){ShowAjaxProcessFull()},complete:function(){CloseAjaxProcessFull()}})}function RegisterAjaxProcess(e){e?($(e).ajaxStart(function(){ShowAjaxProcessFull()}),$(e).ajaxComplete(function(){CloseAjaxProcessFull()})):($("body").ajaxStart(function(){ShowAjaxProcessFull()}),$("body").ajaxStart(function(){CloseAjaxProcessFull()}))}function getUrlVars(){for(var e,t=[],a=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),o=0;o<a.length;o++)e=a[o].split("="),t.push(e[0]),t[e[0]]=e[1];return t}function ConvertProcessStatus(e){var t="";switch(e){case 1:t="Khởi tạo";break;case 2:t="Đang duyệt";break;case 4:t="Đã duyệt";break;case 8:t="Không được duyệt";break;case 16:t="Đang xử lý";break;case 32:t="Hoàn thành";break;default:t="Không xác định"}return t}function ResetDefaulValue(e){$("#"+e).find("[defaultvalue]").each(function(e,t){if($(t).val($(t).attr("defaultvalue")),"checkbox"==$(t)[0].type){var a=$(t).attr("defaultvalue");"true"==a?$(t).attr("checked",!0):$(t).attr("checked",!1)}})}function GroupValidation(e,t,a){function o(e){for(var t=!0,o=0;o<e.length;o++){var r=n(e[o]);if(!a&&r)return!0;t=t&&r}return t}function n(e){var t="";switch(e.type.toLowerCase()){case"text":return t=$(e).val().replace(/ /g,""),!(t.length<=0||void 0==t||""==t||null==t||0>=t);case"select":return t=$(e).val().replace(/ /g,""),!(t.length<=0||void 0==t||""==t||null==t||0>=t);case"textarea":return t=$(e).val().replace(/ /g,""),!(t.length<=0||void 0==t||""==t||null==t||0>=t);case"radio":return t=$(e).val().replace(/ /g,""),!(t.length<=0||void 0==t||""==t||null==t||0>=t);case"checkbox":return t=$(e).val().replace(/ /g,""),!(t.length<=0||void 0==t||""==t||null==t||0>=t);case"file":return t=$(e).val().replace(/ /g,""),!(t.length<=0||void 0==t||""==t||null==t||0>=t);default:return t=$(e).val().replace(/ /g,""),!(t.length<=0||void 0==t||""==t||null==t||0>=t)}}function r(e){if(e){var a="disabled";"string"==typeof t&&"hide"==$.trim(t).toLowerCase()||"string"==typeof t&&"disabled"==$.trim(t).toLowerCase()&&(a="disabled"),$.each(s,function(e,t){"hide"==a?$(t).show():$(t).removeAttr(a)})}else{var a="disabled";"string"==typeof t&&"hide"==$.trim(t).toLowerCase()||"string"==typeof t&&"disabled"==$.trim(t).toLowerCase()&&(a="disabled"),$.each(s,function(e,t){"hide"==a?$(t).hide():$(t).attr(a,"disabled")})}}var l=$("input["+e+'],input[type="text"]['+e+'], input[type="checkbox"]['+e+'],input[type="radio"]['+e+'],input[type="file"]['+e+"],select["+e+"],textarea["+e+"]"),s=$("a["+e+"],button["+e+'],input[type="button"]['+e+'],input[type="submit"]['+e+"]");r(!1);$.each(l,function(){$(l).on("keydown",function(){r(o(l)?!0:!1)}),$(l).on("change",function(){r(o(l)?!0:!1)})})}$.xhrPool=[],$.xhrPool.abortAll=function(){$(this).each(function(e,t){t.abort()})},$.ajaxSetup({beforeSend:function(e){$.xhrPool.push(e)}}),$(document).ajaxStop(function(){$.xhrPool.pop()}),$(document).ajaxError(function(){$.xhrPool.abortAll()}),function(e){e.DateTime={parseDate:function(e,t){if(void 0==e||null==e||0==e.length)return null;var a=/(\d{2})\/(\d{2})\/(\d{4}) (\d{2}):(\d{2}):(\d{2})/g,o=a.exec(e),n=null;if(t&&"dd/mm/yy"==t){var r=/(\d{2})\/(\d{2})\/(\d{4})/g;o=r.exec(e),n=new Date(+o[3],+o[2]-1,+o[1],0,0,0)}else if(t&&"dd/mm/yy hh:ii"==t){var l=/(\d{2})\/(\d{2})\/(\d{4}) (\d{2}):(\d{2})/g;o=l.exec(e),n=new Date(+o[3],+o[2]-1,+o[1],+o[4],+o[5],0)}else n=new Date(+o[3],+o[2]-1,+o[1],+o[4],+o[5],+o[6]);return n}}}(jQuery),String.prototype.format=String.prototype.f=function(){for(var e=this,t=arguments.length;t--;)e=e.replace(new RegExp("\\{"+t+"\\}","gm"),arguments[t]);return e};var GlobalCommon={Flag:{IsAdvanceSearch:!1},CallbackProcess:function(e,t,a,o,n,r,l){if(e.ErrorMessages&&e.ErrorMessages.length>0){if(401==e.StatusCode)1==e.ErrorMessages.length?GlobalCommon.ShowMessageDialog(e.ErrorMessages[0].Message,null,"Thông báo"):GlobalCommon.ShowMessageDialog("Bạn không có quyền truy cập dữ liệu.",null,"Thông báo");else if(403==e.StatusCode)e.ErrorMessages&&1==e.ErrorMessages.length?GlobalCommon.ShowMessageDialog(e.ErrorMessages[0].Message,null,"Thông báo"):GlobalCommon.ShowMessageDialog("Bạn chưa đăng nhập.",null,"Thông báo");else try{null!=a&&1==a&&GlobalCommon.ShowMessageDialog("Đã có lỗi xảy ra. Vui lòng kiểm tra lại thông tin.",null,"Thông báo"),_showModelErrors(e,o,n,r),l&&l()}catch(s){alert(s)}CloseAjaxProcessFull()}else t&&t()},ErrorAjaxProcess:function(){},Redirect:{RefreshPage:function(){window.location=window.location.pathname},HomePage:function(){window.location="/"},LogoutRequest:function(){window.location="/Account/LogOff"}},ShowConfirmDialog:function(e,t,a,o,n,r){jCustomConfirm(e,r,t,a,o,n),$("#popup_overlay").css("background-color","#666").css("opacity","0.5")},CloseConfirmDialog:function(){jConfirmClose()},ShowMessageDialog:function(e,t,a){jAlert(e,a,function(e){e&&t&&t()}),$("#popup_overlay").css("background-color","#666").css("opacity","0.5")},CloseMessageDialog:function(){jConfirmClose()},GetErrorMessage:function(e){for(var t="",a=0;a<e.ErrorMessages.length;a++)t+=e.ErrorMessages[a].Message+"<br/>";return t},ClearErrorStatus:function(e){e&&($("#"+e).find("div.alert").hide(),$("#"+e).find(".control-group").removeClass("error"),$("#"+e).find("label.help-inline[bindmessage]").html(""),$("#"+e).find("label.help-inline[bindmessage]").removeAttr("title"))}};